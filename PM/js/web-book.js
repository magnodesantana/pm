function setCookie(e, t, n, r) { var o = new Date; o.setTime(o.getTime() + 24 * n * 60 * 60 * 1e3); var i = "expires=" + o.toUTCString(), a = r ? ";SameSite=" + r : ""; document.cookie = e + "=" + t + ";" + i + a + ";Secure;path=/" } function getCookie(e) { for (var t = e + "=", n = decodeURIComponent(document.cookie).split(";"), r = 0; r < n.length; r++) { for (var o = n[r]; " " == o.charAt(0);)o = o.substring(1); if (0 == o.indexOf(t)) return o.substring(t.length, o.length) } return null } (function () { window.Beanstalk = { enablePageviewTracking: !0, enablePresenceTracking: !1, enableRUMTiming: !0, generatePageviewIds: !0, debug: !1, presenceGranularity: 60, dev: location.host.match(/.*?\.dev/), uuid: null, _local_uuid: null, local_uuid: function () { var e; return null != Beanstalk._local_uuid ? Beanstalk._local_uuid : (Beanstalk._local_uuid = getCookie("_beanstalk_uuid") || getCookie("_beanstalk_uuid_ss"), null == Beanstalk._local_uuid && (Beanstalk._local_uuid = (Beanstalk.S4() + Beanstalk.S4() + "-" + Beanstalk.S4() + "-4" + Beanstalk.S4().substr(0, 3) + "-" + Beanstalk.S4() + "-" + Beanstalk.S4() + Beanstalk.S4() + Beanstalk.S4()).toLowerCase()), e = window.location.hostname.split("."), "." + window.location.hostname, e.length > 2 && "." + e.slice(1, e.length).join("."), setCookie("_beanstalk_uuid", Beanstalk._local_uuid, 90, "None"), setCookie("_beanstalk_uuid_ss", Beanstalk._local_uuid, 90), Beanstalk._local_uuid) }, site_id: null, requests: [], resource_timing: [], pageview_timing: {}, pageview: {}, beaconURL: function () { var e; return e = Beanstalk.dev ? "dash.test" : "beanstalk.37signals.com", window.location.protocol + "//" + e + "/basecamp.gif?" }, S4: function () { return (65536 * (1 + Math.random()) | 0).toString(16).substring(1) } } }).call(this), function () { Beanstalk.beacon = { params: [], enabled: !0, autosend: !0, sendBeaconEnabled: !0, log: function (e) { var t, n, r; for (t in n = [], e) r = e[t], n.push(Beanstalk.beacon.params.push([t, r])); return n }, send: function () { var e, t, n, r, o, i, a, s, c, u; if (Beanstalk.debug && console.log(JSON.stringify(Beanstalk.beacon.params)), Beanstalk.beacon.enabled) { for (r in o = {}, i = Beanstalk.beacon.params) "function" != typeof (u = i[r]) && ("undefined" == typeof o[u[0]] ? o[u[0]] = u[1] : "[object Array]" === Object.prototype.toString.call(o[u[0]]) ? o[u[0]].push(u[1]) : o[u[0]] = [o[u[0]], u[1]]); if (Object.keys(o).length) if (Beanstalk.site_id && (o.site_id = Beanstalk.site_id), Beanstalk.uuid && (o.uuid = Beanstalk.uuid), o.local_uuid = Beanstalk.local_uuid(), void 0 !== navigator.sendBeacon && Beanstalk.beacon.sendBeaconEnabled) { for (n in e = new FormData, o) c = o[n], e.append(n, c); Beanstalk.beacon.sendBeaconEnabled = navigator.sendBeacon(Beanstalk.beaconURL(), e) } else if (JSON.stringify(o).length < 4096) { for (n in s = Beanstalk.beaconURL(), o) c = o[n], s += "&" + n + "=" + encodeURIComponent(c); (t = new Image).src = s, t.onerror = function () { if (Beanstalk.dev) return Beanstalk.beacon.enabled = !1, console.warn("disabling instrumentation beacon") } } else { for (n in o) c = o[n], "[object Array]" === Object.prototype.toString.call(c) && (o[n] = c.join(",")); (a = new XMLHttpRequest).open("POST", Beanstalk.beaconURL(), !0), a.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8"), a.send(o), a.onerror = function () { if (Beanstalk.dev) return Beanstalk.beacon.enabled = !1, console.warn("disabling instrumentation beacon") } } return Beanstalk.beacon.params = [] } } } }.call(this), function () { Beanstalk.logCohort = function (e, t) { return Beanstalk.beacon.log({ "cohort[][experiment]": e, "cohort[][group]": t }), Beanstalk.beacon.send() } }.call(this), function () { var e; e = !0, document.addEventListener("page:restore turbolinks:snapshot-load", function () { return e = !1 }), document.addEventListener("ready page:load turbolinks:load", function () { return e = !0 }), Beanstalk.logEvent = function (t, n) { if (e) return Beanstalk.beacon.log({ "event[][name]": t, "event[][value]": n }), Beanstalk.beacon.params.length ? setTimeout(Beanstalk.beacon.send, 1e3) : Beanstalk.beacon.send } }.call(this), function () { var e, t; Beanstalk.logPageview = function (e) { var t; if (Beanstalk.enablePageviewTracking) return null == e && (e = {}), Beanstalk.generatePageviewIds && (Beanstalk.lastPageviewId = (Beanstalk.S4() + Beanstalk.S4() + "-" + Beanstalk.S4() + "-4" + Beanstalk.S4().substr(0, 3) + "-" + Beanstalk.S4() + "-" + Beanstalk.S4() + Beanstalk.S4() + Beanstalk.S4()).toLowerCase(), e["pageview[pageview_id]"] = Beanstalk.lastPageviewId), t = { "pageview[host]": document.location.host, "pageview[path]": document.location.pathname, "pageview[query]": document.location.search, "pageview[referrer]": document.referrer, "browser[width]": window.innerWidth || 0, "browser[height]": window.innerHeight || 0, "browser[pixelRatio]": window.devicePixelRatio || 0, "browser[screenWidth]": screen.width, "browser[screenHeight]": screen.height, tz: -(new Date).getTimezoneOffset() / 60 }, e = extend({}, t, e), Beanstalk.beacon.log(e), Beanstalk.pageview = e, Beanstalk.beacon.autosend ? setTimeout(Beanstalk.beacon.send, 500) : setTimeout(Beanstalk.beacon.send, 5e3) }, t = function (e) { var t; return t = !1, "visible" === document.visibilityState ? (Beanstalk.logPageview({ "pageview[type]": e }), t = !0) : document.addEventListener("visibilitychange", function () { if ("visible" === document.visibilityState && !t) return Beanstalk.logPageview({ "pageview[type]": e }), t = !0 }) }, e = !0, document.addEventListener("DOMContentLoaded", function () { return e = !1, t("Full page load") }), document.addEventListener("page:load", function () { if (!e) return t("Turbolinks page load") }), document.addEventListener("turbolinks:load", function (n) { if (!e && null != n.originalEvent.data.timing.visitStart) return null != n.originalEvent.data.timing.requestStart ? t("Turbolinks page load") : t("Turbolinks cache restore") }) }.call(this), function () { Beanstalk.enablePresenceTracking && setInterval(function () { return Beanstalk.beacon.log({ presence: !0 }), Beanstalk.beacon.send() }, 1e3 * Beanstalk.presenceGranularity) }.call(this), function () { Beanstalk.logSignup = function (e, t) { return Beanstalk.beacon.log({ "signup[product]": e, "signup[account_id]": t }), Beanstalk.beacon.send() } }.call(this), function () { var e, t, n, r, o, i, a, s, c, u, l, f, p; void 0 === e && (e = { times: {} }), Beanstalk.Timing = { times: e.times, mark: function (e, t) { return t || (t = (new Date).getTime()), Beanstalk.Timing.times[e] = t }, init: function (e) { if (void 0 !== e) return Beanstalk.Timing.times = e } }, r = function (e) { return void 0 === window.performance || void 0 === window.performance.getEntriesByType ? [] : window.performance.getEntriesByType(e) }, n = function () { if (Beanstalk.requests = [], void 0 === window.performance); else { if (void 0 !== window.performance.clearResourceTimings) return performance.clearResourceTimings(); if (void 0 !== window.performance.webkitClearResourceTimings) return performance.webkitClearResourceTimings() } }, o = function () { return void 0 !== window.performance }, f = function (e) { return e.match(/page_updates/) || e.match(/calendar_updates/) || e.match(/projects\.js/) || e.match(/stars$/) || e.match(/beacon\.gif/) || e.match(/progress\.js/) || e.match(/stage\.txt/) }, u = function () { var e, t; try { if (void 0 !== (t = this.responseURL) && t.match(document.location.hostname)) return Beanstalk.requests.push({ status: this.status, type: "ajax", x_request_id: this.getResponseHeader("X-Request-Id"), x_runtime: 1e3 * this.getResponseHeader("X-Runtime"), content_length: this.getResponseHeader("Content-Length") || this.responseText.length, url: t || this.getResponseHeader("X-Request-Path") }) } catch (n) { if (e = n, Beanstalk.debug) return console.log(e) } }, l = function () { var e, n; try { if (void 0 !== (n = this.responseURL) && n.match(document.location.hostname) && t && n.split("?")[0] === document.location.origin + document.location.pathname && "undefined" == typeof p.firstByte) return p.firstByte = new Date } catch (r) { if (e = r, Beanstalk.debug) return console.log(e) } }, c = XMLHttpRequest.prototype.open, window.XMLHttpRequest.prototype.open = function () { return this.addEventListener("load", u), this.addEventListener("progress", l), c.apply(this, arguments) }, a = function (e) { var t, n, r, o, i, a, s, c, u; if (Beanstalk.enableRUMTiming) try { for (c = {}, s = null, a = Beanstalk.requests, n = 0, o = a.length; n < o; n++)if (void 0 !== (i = a[n]).url && void 0 !== i.url && i.url.split("?")[0] === document.location.origin + document.location.pathname) { s = i; break } for (r in s && (Beanstalk.beacon.log({ xrequestid: s.x_request_id }), c["x-runtime"] = s.x_runtime, c.x_request_id = s.x_request_id), e) "string" != typeof (u = e[r]) && "number" != typeof u || (c[r] = u); return Beanstalk.pageview_timing = c, s && (Beanstalk.pageview_timing.x_request_id = s.x_request_id), Beanstalk.beacon.log({ navigationTiming: JSON.stringify(c) }), setTimeout(Beanstalk.beacon.send, 500) } catch (l) { if (t = l, Beanstalk.debug) return console.log(t) } }, s = function () { var e, t, n, o, i, a, s, c, u, l, p, d, h; if (Beanstalk.enableRUMTiming) try { if ((p = r("resource")).length > 0) { for (t in s = [], p) if (!f(p[t].name)) { for (d = {}, l = null, n = 0, i = (c = Beanstalk.requests).length; n < i; n++)if ((a = c[n]).url === p[t].name) { l = a; break } for (o in l && (d.x_request_id = l.x_request_id, d.status = l.status, d.x_runtime = Math.round(l.x_runtime), d.content_length = l.content_length), u = p[t]) "string" != typeof (h = u[o]) && "number" != typeof h || (d[o] = h); s.push(d) } return Beanstalk.resource_timing = s, Beanstalk.beacon.log({ resourceTiming: JSON.stringify(s) }), setTimeout(Beanstalk.beacon.send, 100) } } catch (m) { if (e = m, Beanstalk.debug) return console.log(e) } }, document.addEventListener("DOMContentLoaded", function () { return Beanstalk.Timing.mark("domloaded"), Beanstalk.requests.push({ url: document.location.origin + document.location.pathname, x_runtime: 1e3 * getCookie("X-Runtime"), x_request_id: getCookie("X-Request-Id") }) }), i = !0, window.onload = function () { var e, t, n, r, c; if (i = !1, o()) setTimeout(function () { return a(performance.timing) }, 100); else { for (Beanstalk.Timing.mark("done"), r = { time_to_first_byte: Beanstalk.requests[0].x_runtime, frontend_time: new Date - Beanstalk.Timing.times.firstbyte }, c = e = 0, t = (n = Beanstalk.Timing.times).length; e < t; c = ++e)r[n[c]] = c; a(r) } return setTimeout(s, 200) }, t = !1, p = {}, document.addEventListener("page:load turbolinks:load", function (e) { var n, o, c, u, l, f, d, h; try { if (!i) { for (d = {}, null != e.originalEvent.data.timing ? d = null != e.originalEvent.data.timing.requestStart ? { time_to_first_byte: e.originalEvent.data.timing.requestEnd - e.originalEvent.data.timing.visitStart, frontend_time: e.originalEvent.data.timing.visitEnd - e.originalEvent.data.timing.requestEnd } : { time_to_first_byte: 0, frontend_time: e.originalEvent.data.timing.visitEnd - e.originalEvent.data.timing.visitStart } : ("undefined" == typeof p.firstByte && (p.firstByte = new Date), d = { time_to_first_byte: p.firstByte - p.changeStart, frontend_time: new Date - p.firstByte }), f = null, n = 0, c = (l = r("resource")).length; n < c; n++)if ((u = l[n]).name.split("?")[0] === document.location.origin + document.location.pathname) { f = u; break } if (f) { for (o in f) "number" == typeof (h = f[o]) && "duration" !== o && h >= f.startTime && (d[o] = h - f.startTime); d.duration = f.duration, d.x_request_id = f.x_request_id, d["x-runtime"] = f.x_runtime } return Beanstalk.pageview_timing = d, setTimeout(function () { return a(d) }, 100), setTimeout(s, 300), t = !1, p = {} } } catch (m) { if (e = m, Beanstalk.debug) return console.log(e) } }), document.addEventListener("page:receive", function () { return p.firstByte = new Date }), document.addEventListener("page:fetch page:beforechange workspace:visit page:before-change page:before-unload", function (e) { if ("page:before-change" === e.type || "page:beforechange" === e.type || !t) return n(), p.changeStart = new Date, t = !0 }) }.call(this), function () { Beanstalk.logLazyLoadReport = function (e) { var t; if (e.entries.length) return t = { pageview_id: Beanstalk.lastPageviewId, "browser[width]": window.innerWidth || 0, "browser[height]": window.innerHeight || 0, "browser[pixelRatio]": window.devicePixelRatio || 0, "browser[screenWidth]": screen.width, "browser[screenHeight]": screen.height }, e = extend({}, t, { lazy_load_report: e }), Beanstalk.beacon.log(e) } }.call(this); var extend = function (e) { e = e || {}; for (var t = 1; t < arguments.length; t++)if (arguments[t]) for (var n in arguments[t]) arguments[t].hasOwnProperty(n) && (e[n] = arguments[t][n]); return e }; !function (e, t) { "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : e.Popper = t() }(this, function () { "use strict"; function e(e) { return e && "[object Function]" === {}.toString.call(e) } function t(e, t) { if (1 !== e.nodeType) return []; var n = e.ownerDocument.defaultView.getComputedStyle(e, null); return t ? n[t] : n } function n(e) { return "HTML" === e.nodeName ? e : e.parentNode || e.host } function r(e) { if (!e) return document.body; switch (e.nodeName) { case "HTML": case "BODY": return e.ownerDocument.body; case "#document": return e.body }var o = t(e), i = o.overflow, a = o.overflowX, s = o.overflowY; return /(auto|scroll|overlay)/.test(i + s + a) ? e : r(n(e)) } function o(e) { return 11 === e ? ie : 10 === e ? ae : ie || ae } function i(e) { if (!e) return document.documentElement; for (var n = o(10) ? document.body : null, r = e.offsetParent || null; r === n && e.nextElementSibling;)r = (e = e.nextElementSibling).offsetParent; var a = r && r.nodeName; return a && "BODY" !== a && "HTML" !== a ? -1 !== ["TH", "TD", "TABLE"].indexOf(r.nodeName) && "static" === t(r, "position") ? i(r) : r : e ? e.ownerDocument.documentElement : document.documentElement } function a(e) { var t = e.nodeName; return "BODY" !== t && ("HTML" === t || i(e.firstElementChild) === e) } function s(e) { return null === e.parentNode ? e : s(e.parentNode) } function c(e, t) { if (!(e && e.nodeType && t && t.nodeType)) return document.documentElement; var n = e.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_FOLLOWING, r = n ? e : t, o = n ? t : e, u = document.createRange(); u.setStart(r, 0), u.setEnd(o, 0); var l = u.commonAncestorContainer; if (e !== l && t !== l || r.contains(o)) return a(l) ? l : i(l); var f = s(e); return f.host ? c(f.host, t) : c(e, s(t).host) } function u(e) { var t = "top" === (1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "top") ? "scrollTop" : "scrollLeft", n = e.nodeName; if ("BODY" === n || "HTML" === n) { var r = e.ownerDocument.documentElement; return (e.ownerDocument.scrollingElement || r)[t] } return e[t] } function l(e, t) { var n = 2 < arguments.length && void 0 !== arguments[2] && arguments[2], r = u(t, "top"), o = u(t, "left"), i = n ? -1 : 1; return e.top += r * i, e.bottom += r * i, e.left += o * i, e.right += o * i, e } function f(e, t) { var n = "x" === t ? "Left" : "Top", r = "Left" == n ? "Right" : "Bottom"; return parseFloat(e["border" + n + "Width"], 10) + parseFloat(e["border" + r + "Width"], 10) } function p(e, t, n, r) { return Q(t["offset" + e], t["scroll" + e], n["client" + e], n["offset" + e], n["scroll" + e], o(10) ? parseInt(n["offset" + e]) + parseInt(r["margin" + ("Height" === e ? "Top" : "Left")]) + parseInt(r["margin" + ("Height" === e ? "Bottom" : "Right")]) : 0) } function d(e) { var t = e.body, n = e.documentElement, r = o(10) && getComputedStyle(n); return { height: p("Height", t, n, r), width: p("Width", t, n, r) } } function h(e) { return le({}, e, { right: e.left + e.width, bottom: e.top + e.height }) } function m(e) { var n = {}; try { if (o(10)) { n = e.getBoundingClientRect(); var r = u(e, "top"), i = u(e, "left"); n.top += r, n.left += i, n.bottom += r, n.right += i } else n = e.getBoundingClientRect() } catch (t) { } var a = { left: n.left, top: n.top, width: n.right - n.left, height: n.bottom - n.top }, s = "HTML" === e.nodeName ? d(e.ownerDocument) : {}, c = s.width || e.clientWidth || a.right - a.left, l = s.height || e.clientHeight || a.bottom - a.top, p = e.offsetWidth - c, m = e.offsetHeight - l; if (p || m) { var g = t(e); p -= f(g, "x"), m -= f(g, "y"), a.width -= p, a.height -= m } return h(a) } function g(e, n) { var i = 2 < arguments.length && void 0 !== arguments[2] && arguments[2], a = o(10), s = "HTML" === n.nodeName, c = m(e), u = m(n), f = r(e), p = t(n), d = parseFloat(p.borderTopWidth, 10), g = parseFloat(p.borderLeftWidth, 10); i && s && (u.top = Q(u.top, 0), u.left = Q(u.left, 0)); var b = h({ top: c.top - u.top - d, left: c.left - u.left - g, width: c.width, height: c.height }); if (b.marginTop = 0, b.marginLeft = 0, !a && s) { var y = parseFloat(p.marginTop, 10), v = parseFloat(p.marginLeft, 10); b.top -= d - y, b.bottom -= d - y, b.left -= g - v, b.right -= g - v, b.marginTop = y, b.marginLeft = v } return (a && !i ? n.contains(f) : n === f && "BODY" !== f.nodeName) && (b = l(b, n)), b } function b(e) { var t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1], n = e.ownerDocument.documentElement, r = g(e, n), o = Q(n.clientWidth, window.innerWidth || 0), i = Q(n.clientHeight, window.innerHeight || 0), a = t ? 0 : u(n), s = t ? 0 : u(n, "left"); return h({ top: a - r.top + r.marginTop, left: s - r.left + r.marginLeft, width: o, height: i }) } function y(e) { var r = e.nodeName; if ("BODY" === r || "HTML" === r) return !1; if ("fixed" === t(e, "position")) return !0; var o = n(e); return !!o && y(o) } function v(e) { if (!e || !e.parentElement || o()) return document.documentElement; for (var n = e.parentElement; n && "none" === t(n, "transform");)n = n.parentElement; return n || document.documentElement } function w(e, t, o, i) { var a = 4 < arguments.length && void 0 !== arguments[4] && arguments[4], s = { top: 0, left: 0 }, u = a ? v(e) : c(e, t); if ("viewport" === i) s = b(u, a); else { var l; "scrollParent" === i ? "BODY" === (l = r(n(t))).nodeName && (l = e.ownerDocument.documentElement) : l = "window" === i ? e.ownerDocument.documentElement : i; var f = g(l, u, a); if ("HTML" !== l.nodeName || y(u)) s = f; else { var p = d(e.ownerDocument), h = p.height, m = p.width; s.top += f.top - f.marginTop, s.bottom = h + f.top, s.left += f.left - f.marginLeft, s.right = m + f.left } } var w = "number" == typeof (o = o || 0); return s.left += w ? o : o.left || 0, s.top += w ? o : o.top || 0, s.right -= w ? o : o.right || 0, s.bottom -= w ? o : o.bottom || 0, s } function k(e) { return e.width * e.height } function B(e, t, n, r, o) { var i = 5 < arguments.length && void 0 !== arguments[5] ? arguments[5] : 0; if (-1 === e.indexOf("auto")) return e; var a = w(n, r, i, o), s = { top: { width: a.width, height: t.top - a.top }, right: { width: a.right - t.right, height: a.height }, bottom: { width: a.width, height: a.bottom - t.bottom }, left: { width: t.left - a.left, height: a.height } }, c = Object.keys(s).map(function (e) { return le({ key: e }, s[e], { area: k(s[e]) }) }).sort(function (e, t) { return t.area - e.area }), u = c.filter(function (e) { var t = e.width, r = e.height; return t >= n.clientWidth && r >= n.clientHeight }), l = 0 < u.length ? u[0].key : c[0].key, f = e.split("-")[1]; return l + (f ? "-" + f : "") } function E(e, t, n) { var r = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null; return g(n, r ? v(t) : c(t, n), r) } function O(e) { var t = e.ownerDocument.defaultView.getComputedStyle(e), n = parseFloat(t.marginTop || 0) + parseFloat(t.marginBottom || 0), r = parseFloat(t.marginLeft || 0) + parseFloat(t.marginRight || 0); return { width: e.offsetWidth + r, height: e.offsetHeight + n } } function x(e) { var t = { left: "right", right: "left", bottom: "top", top: "bottom" }; return e.replace(/left|right|bottom|top/g, function (e) { return t[e] }) } function T(e, t, n) { n = n.split("-")[0]; var r = O(e), o = { width: r.width, height: r.height }, i = -1 !== ["right", "left"].indexOf(n), a = i ? "top" : "left", s = i ? "left" : "top", c = i ? "height" : "width", u = i ? "width" : "height"; return o[a] = t[a] + t[c] / 2 - r[c] / 2, o[s] = n === s ? t[s] - r[u] : t[x(s)], o } function A(e, t) { return Array.prototype.find ? e.find(t) : e.filter(t)[0] } function P(e, t, n) { if (Array.prototype.findIndex) return e.findIndex(function (e) { return e[t] === n }); var r = A(e, function (e) { return e[t] === n }); return e.indexOf(r) } function L(t, n, r) { return (void 0 === r ? t : t.slice(0, P(t, "name", r))).forEach(function (t) { t["function"] && console.warn("`modifier.function` is deprecated, use `modifier.fn`!"); var r = t["function"] || t.fn; t.enabled && e(r) && (n.offsets.popper = h(n.offsets.popper), n.offsets.reference = h(n.offsets.reference), n = r(n, t)) }), n } function _() { if (!this.state.isDestroyed) { var e = { instance: this, styles: {}, arrowStyles: {}, attributes: {}, flipped: !1, offsets: {} }; e.offsets.reference = E(this.state, this.popper, this.reference, this.options.positionFixed), e.placement = B(this.options.placement, e.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding), e.originalPlacement = e.placement, e.positionFixed = this.options.positionFixed, e.offsets.popper = T(this.popper, e.offsets.reference, e.placement), e.offsets.popper.position = this.options.positionFixed ? "fixed" : "absolute", e = L(this.modifiers, e), this.state.isCreated ? this.options.onUpdate(e) : (this.state.isCreated = !0, this.options.onCreate(e)) } } function S(e, t) { return e.some(function (e) { var n = e.name; return e.enabled && n === t }) } function C(e) { for (var t = [!1, "ms", "Webkit", "Moz", "O"], n = e.charAt(0).toUpperCase() + e.slice(1), r = 0; r < t.length; r++) { var o = t[r], i = o ? "" + o + n : e; if ("undefined" != typeof document.body.style[i]) return i } return null } function j() { return this.state.isDestroyed = !0, S(this.modifiers, "applyStyle") && (this.popper.removeAttribute("x-placement"), this.popper.style.position = "", this.popper.style.top = "", this.popper.style.left = "", this.popper.style.right = "", this.popper.style.bottom = "", this.popper.style.willChange = "", this.popper.style[C("transform")] = ""), this.disableEventListeners(), this.options.removeOnDestroy && this.popper.parentNode.removeChild(this.popper), this } function F(e) { var t = e.ownerDocument; return t ? t.defaultView : window } function N(e, t, n, o) { var i = "BODY" === e.nodeName, a = i ? e.ownerDocument.defaultView : e; a.addEventListener(t, n, { passive: !0 }), i || N(r(a.parentNode), t, n, o), o.push(a) } function M(e, t, n, o) { n.updateBound = o, F(e).addEventListener("resize", n.updateBound, { passive: !0 }); var i = r(e); return N(i, "scroll", n.updateBound, n.scrollParents), n.scrollElement = i, n.eventsEnabled = !0, n } function I() { this.state.eventsEnabled || (this.state = M(this.reference, this.options, this.state, this.scheduleUpdate)) } function R(e, t) { return F(e).removeEventListener("resize", t.updateBound), t.scrollParents.forEach(function (e) { e.removeEventListener("scroll", t.updateBound) }), t.updateBound = null, t.scrollParents = [], t.scrollElement = null, t.eventsEnabled = !1, t } function D() { this.state.eventsEnabled && (cancelAnimationFrame(this.scheduleUpdate), this.state = R(this.reference, this.state)) } function q(e) { return "" !== e && !isNaN(parseFloat(e)) && isFinite(e) } function U(e, t) { Object.keys(t).forEach(function (n) { var r = ""; -1 !== ["width", "height", "top", "right", "bottom", "left"].indexOf(n) && q(t[n]) && (r = "px"), e.style[n] = t[n] + r }) } function H(e, t) { Object.keys(t).forEach(function (n) { !1 === t[n] ? e.removeAttribute(n) : e.setAttribute(n, t[n]) }) } function V(e, t) { var n = e.offsets, r = n.popper, o = n.reference, i = Z, a = function (e) { return e }, s = i(o.width), c = i(r.width), u = -1 !== ["left", "right"].indexOf(e.placement), l = -1 !== e.placement.indexOf("-"), f = t ? u || l || s % 2 == c % 2 ? i : J : a, p = t ? i : a; return { left: f(1 == s % 2 && 1 == c % 2 && !l && t ? r.left - 1 : r.left), top: p(r.top), bottom: p(r.bottom), right: f(r.right) } } function W(e, t, n) { var r = A(e, function (e) { return e.name === t }), o = !!r && e.some(function (e) { return e.name === n && e.enabled && e.order < r.order }); if (!o) { var i = "`" + t + "`"; console.warn("`" + n + "` modifier is required by " + i + " modifier in order to work, be sure to include it before " + i + "!") } return o } function K(e) { return "end" === e ? "start" : "start" === e ? "end" : e } function z(e) { var t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1], n = de.indexOf(e), r = de.slice(n + 1).concat(de.slice(0, n)); return t ? r.reverse() : r } function X(e, t, n, r) { var o = e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/), i = +o[1], a = o[2]; if (!i) return e; if (0 === a.indexOf("%")) { var s; switch (a) { case "%p": s = n; break; case "%": case "%r": default: s = r }return h(s)[t] / 100 * i } return "vh" === a || "vw" === a ? ("vh" === a ? Q(document.documentElement.clientHeight, window.innerHeight || 0) : Q(document.documentElement.clientWidth, window.innerWidth || 0)) / 100 * i : i } function Y(e, t, n, r) { var o = [0, 0], i = -1 !== ["right", "left"].indexOf(r), a = e.split(/(\+|\-)/).map(function (e) { return e.trim() }), s = a.indexOf(A(a, function (e) { return -1 !== e.search(/,|\s/) })); a[s] && -1 === a[s].indexOf(",") && console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead."); var c = /\s*,\s*|\s+/, u = -1 === s ? [a] : [a.slice(0, s).concat([a[s].split(c)[0]]), [a[s].split(c)[1]].concat(a.slice(s + 1))]; return (u = u.map(function (e, r) { var o = (1 === r ? !i : i) ? "height" : "width", a = !1; return e.reduce(function (e, t) { return "" === e[e.length - 1] && -1 !== ["+", "-"].indexOf(t) ? (e[e.length - 1] = t, a = !0, e) : a ? (e[e.length - 1] += t, a = !1, e) : e.concat(t) }, []).map(function (e) { return X(e, o, t, n) }) })).forEach(function (e, t) { e.forEach(function (n, r) { q(n) && (o[t] += n * ("-" === e[r - 1] ? -1 : 1)) }) }), o } function $(e, t) { var n, r = t.offset, o = e.placement, i = e.offsets, a = i.popper, s = i.reference, c = o.split("-")[0]; return n = q(+r) ? [+r, 0] : Y(r, a, s, c), "left" === c ? (a.top += n[0], a.left -= n[1]) : "right" === c ? (a.top += n[0], a.left += n[1]) : "top" === c ? (a.left += n[0], a.top -= n[1]) : "bottom" === c && (a.left += n[0], a.top += n[1]), e.popper = a, e } for (var G = Math.min, J = Math.floor, Z = Math.round, Q = Math.max, ee = "undefined" != typeof window && "undefined" != typeof document, te = ["Edge", "Trident", "Firefox"], ne = 0, re = 0; re < te.length; re += 1)if (ee && 0 <= navigator.userAgent.indexOf(te[re])) { ne = 1; break } var oe = ee && window.Promise ? function (e) { var t = !1; return function () { t || (t = !0, window.Promise.resolve().then(function () { t = !1, e() })) } } : function (e) { var t = !1; return function () { t || (t = !0, setTimeout(function () { t = !1, e() }, ne)) } }, ie = ee && !(!window.MSInputMethodContext || !document.documentMode), ae = ee && /MSIE 10/.test(navigator.userAgent), se = function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }, ce = function () { function e(e, t) { for (var n, r = 0; r < t.length; r++)(n = t[r]).enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } return function (t, n, r) { return n && e(t.prototype, n), r && e(t, r), t } }(), ue = function (e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e }, le = Object.assign || function (e) { for (var t, n = 1; n < arguments.length; n++)for (var r in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]); return e }, fe = ee && /Firefox/i.test(navigator.userAgent), pe = ["auto-start", "auto", "auto-end", "top-start", "top", "top-end", "right-start", "right", "right-end", "bottom-end", "bottom", "bottom-start", "left-end", "left", "left-start"], de = pe.slice(3), he = { FLIP: "flip", CLOCKWISE: "clockwise", COUNTERCLOCKWISE: "counterclockwise" }, me = function () { function t(n, r) { var o = this, i = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {}; se(this, t), this.scheduleUpdate = function () { return requestAnimationFrame(o.update) }, this.update = oe(this.update.bind(this)), this.options = le({}, t.Defaults, i), this.state = { isDestroyed: !1, isCreated: !1, scrollParents: [] }, this.reference = n && n.jquery ? n[0] : n, this.popper = r && r.jquery ? r[0] : r, this.options.modifiers = {}, Object.keys(le({}, t.Defaults.modifiers, i.modifiers)).forEach(function (e) { o.options.modifiers[e] = le({}, t.Defaults.modifiers[e] || {}, i.modifiers ? i.modifiers[e] : {}) }), this.modifiers = Object.keys(this.options.modifiers).map(function (e) { return le({ name: e }, o.options.modifiers[e]) }).sort(function (e, t) { return e.order - t.order }), this.modifiers.forEach(function (t) { t.enabled && e(t.onLoad) && t.onLoad(o.reference, o.popper, o.options, t, o.state) }), this.update(); var a = this.options.eventsEnabled; a && this.enableEventListeners(), this.state.eventsEnabled = a } return ce(t, [{ key: "update", value: function () { return _.call(this) } }, { key: "destroy", value: function () { return j.call(this) } }, { key: "enableEventListeners", value: function () { return I.call(this) } }, { key: "disableEventListeners", value: function () { return D.call(this) } }]), t }(); return me.Utils = ("undefined" == typeof window ? global : window).PopperUtils, me.placements = pe, me.Defaults = { placement: "bottom", positionFixed: !1, eventsEnabled: !0, removeOnDestroy: !1, onCreate: function () { }, onUpdate: function () { }, modifiers: { shift: { order: 100, enabled: !0, fn: function (e) { var t = e.placement, n = t.split("-")[0], r = t.split("-")[1]; if (r) { var o = e.offsets, i = o.reference, a = o.popper, s = -1 !== ["bottom", "top"].indexOf(n), c = s ? "left" : "top", u = s ? "width" : "height", l = { start: ue({}, c, i[c]), end: ue({}, c, i[c] + i[u] - a[u]) }; e.offsets.popper = le({}, a, l[r]) } return e } }, offset: { order: 200, enabled: !0, fn: $, offset: 0 }, preventOverflow: { order: 300, enabled: !0, fn: function (e, t) { var n = t.boundariesElement || i(e.instance.popper); e.instance.reference === n && (n = i(n)); var r = C("transform"), o = e.instance.popper.style, a = o.top, s = o.left, c = o[r]; o.top = "", o.left = "", o[r] = ""; var u = w(e.instance.popper, e.instance.reference, t.padding, n, e.positionFixed); o.top = a, o.left = s, o[r] = c, t.boundaries = u; var l = t.priority, f = e.offsets.popper, p = { primary: function (e) { var n = f[e]; return f[e] < u[e] && !t.escapeWithReference && (n = Q(f[e], u[e])), ue({}, e, n) }, secondary: function (e) { var n = "right" === e ? "left" : "top", r = f[n]; return f[e] > u[e] && !t.escapeWithReference && (r = G(f[n], u[e] - ("right" === e ? f.width : f.height))), ue({}, n, r) } }; return l.forEach(function (e) { var t = -1 === ["left", "top"].indexOf(e) ? "secondary" : "primary"; f = le({}, f, p[t](e)) }), e.offsets.popper = f, e }, priority: ["left", "right", "top", "bottom"], padding: 5, boundariesElement: "scrollParent" }, keepTogether: { order: 400, enabled: !0, fn: function (e) { var t = e.offsets, n = t.popper, r = t.reference, o = e.placement.split("-")[0], i = J, a = -1 !== ["top", "bottom"].indexOf(o), s = a ? "right" : "bottom", c = a ? "left" : "top", u = a ? "width" : "height"; return n[s] < i(r[c]) && (e.offsets.popper[c] = i(r[c]) - n[u]), n[c] > i(r[s]) && (e.offsets.popper[c] = i(r[s])), e } }, arrow: { order: 500, enabled: !0, fn: function (e, n) { var r; if (!W(e.instance.modifiers, "arrow", "keepTogether")) return e; var o = n.element; if ("string" == typeof o) { if (!(o = e.instance.popper.querySelector(o))) return e } else if (!e.instance.popper.contains(o)) return console.warn("WARNING: `arrow.element` must be child of its popper element!"), e; var i = e.placement.split("-")[0], a = e.offsets, s = a.popper, c = a.reference, u = -1 !== ["left", "right"].indexOf(i), l = u ? "height" : "width", f = u ? "Top" : "Left", p = f.toLowerCase(), d = u ? "left" : "top", m = u ? "bottom" : "right", g = O(o)[l]; c[m] - g < s[p] && (e.offsets.popper[p] -= s[p] - (c[m] - g)), c[p] + g > s[m] && (e.offsets.popper[p] += c[p] + g - s[m]), e.offsets.popper = h(e.offsets.popper); var b = c[p] + c[l] / 2 - g / 2, y = t(e.instance.popper), v = parseFloat(y["margin" + f], 10), w = parseFloat(y["border" + f + "Width"], 10), k = b - e.offsets.popper[p] - v - w; return k = Q(G(s[l] - g, k), 0), e.arrowElement = o, e.offsets.arrow = (ue(r = {}, p, Z(k)), ue(r, d, ""), r), e }, element: "[x-arrow]" }, flip: { order: 600, enabled: !0, fn: function (e, t) { if (S(e.instance.modifiers, "inner")) return e; if (e.flipped && e.placement === e.originalPlacement) return e; var n = w(e.instance.popper, e.instance.reference, t.padding, t.boundariesElement, e.positionFixed), r = e.placement.split("-")[0], o = x(r), i = e.placement.split("-")[1] || "", a = []; switch (t.behavior) { case he.FLIP: a = [r, o]; break; case he.CLOCKWISE: a = z(r); break; case he.COUNTERCLOCKWISE: a = z(r, !0); break; default: a = t.behavior }return a.forEach(function (s, c) { if (r !== s || a.length === c + 1) return e; r = e.placement.split("-")[0], o = x(r); var u = e.offsets.popper, l = e.offsets.reference, f = J, p = "left" === r && f(u.right) > f(l.left) || "right" === r && f(u.left) < f(l.right) || "top" === r && f(u.bottom) > f(l.top) || "bottom" === r && f(u.top) < f(l.bottom), d = f(u.left) < f(n.left), h = f(u.right) > f(n.right), m = f(u.top) < f(n.top), g = f(u.bottom) > f(n.bottom), b = "left" === r && d || "right" === r && h || "top" === r && m || "bottom" === r && g, y = -1 !== ["top", "bottom"].indexOf(r), v = !!t.flipVariations && (y && "start" === i && d || y && "end" === i && h || !y && "start" === i && m || !y && "end" === i && g), w = !!t.flipVariationsByContent && (y && "start" === i && h || y && "end" === i && d || !y && "start" === i && g || !y && "end" === i && m), k = v || w; (p || b || k) && (e.flipped = !0, (p || b) && (r = a[c + 1]), k && (i = K(i)), e.placement = r + (i ? "-" + i : ""), e.offsets.popper = le({}, e.offsets.popper, T(e.instance.popper, e.offsets.reference, e.placement)), e = L(e.instance.modifiers, e, "flip")) }), e }, behavior: "flip", padding: 5, boundariesElement: "viewport", flipVariations: !1, flipVariationsByContent: !1 }, inner: { order: 700, enabled: !1, fn: function (e) { var t = e.placement, n = t.split("-")[0], r = e.offsets, o = r.popper, i = r.reference, a = -1 !== ["left", "right"].indexOf(n), s = -1 === ["top", "left"].indexOf(n); return o[a ? "left" : "top"] = i[n] - (s ? o[a ? "width" : "height"] : 0), e.placement = x(t), e.offsets.popper = h(o), e } }, hide: { order: 800, enabled: !0, fn: function (e) { if (!W(e.instance.modifiers, "hide", "preventOverflow")) return e; var t = e.offsets.reference, n = A(e.instance.modifiers, function (e) { return "preventOverflow" === e.name }).boundaries; if (t.bottom < n.top || t.left > n.right || t.top > n.bottom || t.right < n.left) { if (!0 === e.hide) return e; e.hide = !0, e.attributes["x-out-of-boundaries"] = "" } else { if (!1 === e.hide) return e; e.hide = !1, e.attributes["x-out-of-boundaries"] = !1 } return e } }, computeStyle: { order: 850, enabled: !0, fn: function (e, t) { var n = t.x, r = t.y, o = e.offsets.popper, a = A(e.instance.modifiers, function (e) { return "applyStyle" === e.name }).gpuAcceleration; void 0 !== a && console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!"); var s, c, u = void 0 === a ? t.gpuAcceleration : a, l = i(e.instance.popper), f = m(l), p = { position: o.position }, d = V(e, 2 > window.devicePixelRatio || !fe), h = "bottom" === n ? "top" : "bottom", g = "right" === r ? "left" : "right", b = C("transform"); if (c = "bottom" == h ? "HTML" === l.nodeName ? -l.clientHeight + d.bottom : -f.height + d.bottom : d.top, s = "right" == g ? "HTML" === l.nodeName ? -l.clientWidth + d.right : -f.width + d.right : d.left, u && b) p[b] = "translate3d(" + s + "px, " + c + "px, 0)", p[h] = 0, p[g] = 0, p.willChange = "transform"; else { var y = "bottom" == h ? -1 : 1, v = "right" == g ? -1 : 1; p[h] = c * y, p[g] = s * v, p.willChange = h + ", " + g } var w = { "x-placement": e.placement }; return e.attributes = le({}, w, e.attributes), e.styles = le({}, p, e.styles), e.arrowStyles = le({}, e.offsets.arrow, e.arrowStyles), e }, gpuAcceleration: !0, x: "bottom", y: "right" }, applyStyle: { order: 900, enabled: !0, fn: function (e) { return U(e.instance.popper, e.styles), H(e.instance.popper, e.attributes), e.arrowElement && Object.keys(e.arrowStyles).length && U(e.arrowElement, e.arrowStyles), e }, onLoad: function (e, t, n, r, o) { var i = E(o, t, e, n.positionFixed), a = B(n.placement, i, t, e, n.modifiers.flip.boundariesElement, n.modifiers.flip.padding); return t.setAttribute("x-placement", a), U(t, { position: n.positionFixed ? "fixed" : "absolute" }), n }, gpuAcceleration: void 0 } } }, me }), function (e, t) { "object" == typeof exports && "undefined" != typeof module ? t(exports) : "function" == typeof define && define.amd ? define(["exports"], t) : t(e.Stimulus = {}) }(this, function (e) {
    "use strict"; function t(e) { if ("immediatePropagationStopped" in e) return e; var t = e.stopImmediatePropagation; return Object.assign(e, { immediatePropagationStopped: !1, stopImmediatePropagation: function () { this.immediatePropagationStopped = !0, t.call(this) } }) } function n(e) {
        var t = e.trim().match(P) || []; return { eventTarget: r(t[4]), eventName: t[2], identifier: t[5], methodName: t[7] }
    } function r(e) { return "window" == e ? window : "document" == e ? document : void 0 } function o(e) { return e == window ? "window" : e == document ? "document" : void 0 } function i(e) { var t = e.tagName.toLowerCase(); if (t in _) return _[t](e) } function a(e) { throw new Error(e) } function s(e, t, n) { u(e, t).add(n) } function c(e, t, n) { u(e, t)["delete"](n), l(e, t) } function u(e, t) { var n = e.get(t); return n || (n = new Set, e.set(t, n)), n } function l(e, t) { var n = e.get(t); null != n && 0 == n.size && e["delete"](t) } function f(e, t, n) { return e.trim().split(/\s+/).filter(function (e) { return e.length }).map(function (e, r) { return { element: t, attributeName: n, content: e, index: r } }) } function p(e, t) { var n = Math.max(e.length, t.length); return Array.from({ length: n }, function (n, r) { return [e[r], t[r]] }) } function d(e, t) { return e && t && e.index == t.index && e.content == t.content } function h(e) { return { identifier: e.identifier, controllerConstructor: m(e.controllerConstructor) } } function m(e) { var t = U(e); return t.bless(), t } function g(e) { return e.replace(/([A-Z])/g, function (e, t) { return "-" + t.toLowerCase() }) } function b(e, t) { return "[" + e + '~="' + t + '"]' } function y() { return new Promise(function (e) { "loading" == document.readyState ? document.addEventListener("DOMContentLoaded", e) : e() }) } function v(e) { var t = e.prototype; w(e).forEach(function (e) { var n; return E(t, ((n = {})[e + "Target"] = { get: function () { var t = this.targets.find(e); if (t) return t; throw new Error('Missing target element "' + this.identifier + "." + e + '"') } }, n[e + "Targets"] = { get: function () { return this.targets.findAll(e) } }, n["has" + O(e) + "Target"] = { get: function () { return this.targets.has(e) } }, n)) }) } function w(e) { var t = k(e); return Array.from(t.reduce(function (e, t) { return B(t).forEach(function (t) { return e.add(t) }), e }, new Set)) } function k(e) { for (var t = []; e;)t.push(e), e = Object.getPrototypeOf(e); return t } function B(e) { var t = e.targets; return Array.isArray(t) ? t : [] } function E(e, t) { Object.keys(t).forEach(function (n) { if (!(n in e)) { var r = t[n]; Object.defineProperty(e, n, r) } }) } function O(e) { return e.charAt(0).toUpperCase() + e.slice(1) } var x, T = function () { function e(e, t) { this.eventTarget = e, this.eventName = t, this.unorderedBindings = new Set } return e.prototype.connect = function () { this.eventTarget.addEventListener(this.eventName, this, !1) }, e.prototype.disconnect = function () { this.eventTarget.removeEventListener(this.eventName, this, !1) }, e.prototype.bindingConnected = function (e) { this.unorderedBindings.add(e) }, e.prototype.bindingDisconnected = function (e) { this.unorderedBindings["delete"](e) }, e.prototype.handleEvent = function (e) { for (var n = t(e), r = 0, o = this.bindings; r < o.length; r++) { var i = o[r]; if (n.immediatePropagationStopped) break; i.handleEvent(n) } }, Object.defineProperty(e.prototype, "bindings", { get: function () { return Array.from(this.unorderedBindings).sort(function (e, t) { var n = e.index, r = t.index; return n < r ? -1 : n > r ? 1 : 0 }) }, enumerable: !0, configurable: !0 }), e }(), A = function () { function e(e) { this.application = e, this.eventListenerMaps = new Map, this.started = !1 } return e.prototype.start = function () { this.started || (this.started = !0, this.eventListeners.forEach(function (e) { return e.connect() })) }, e.prototype.stop = function () { this.started && (this.started = !1, this.eventListeners.forEach(function (e) { return e.disconnect() })) }, Object.defineProperty(e.prototype, "eventListeners", { get: function () { return Array.from(this.eventListenerMaps.values()).reduce(function (e, t) { return e.concat(Array.from(t.values())) }, []) }, enumerable: !0, configurable: !0 }), e.prototype.bindingConnected = function (e) { this.fetchEventListenerForBinding(e).bindingConnected(e) }, e.prototype.bindingDisconnected = function (e) { this.fetchEventListenerForBinding(e).bindingDisconnected(e) }, e.prototype.handleError = function (e, t, n) { void 0 === n && (n = {}), this.application.handleError(e, "Error " + t, n) }, e.prototype.fetchEventListenerForBinding = function (e) { var t = e.eventTarget, n = e.eventName; return this.fetchEventListener(t, n) }, e.prototype.fetchEventListener = function (e, t) { var n = this.fetchEventListenerMapForEventTarget(e), r = n.get(t); return r || (r = this.createEventListener(e, t), n.set(t, r)), r }, e.prototype.createEventListener = function (e, t) { var n = new T(e, t); return this.started && n.connect(), n }, e.prototype.fetchEventListenerMapForEventTarget = function (e) { var t = this.eventListenerMaps.get(e); return t || (t = new Map, this.eventListenerMaps.set(e, t)), t }, e }(), P = /^((.+?)(@(window|document))?->)?(.+?)(#(.+))?$/, L = function () { function e(e, t, n) { this.element = e, this.index = t, this.eventTarget = n.eventTarget || e, this.eventName = n.eventName || i(e) || a("missing event name"), this.identifier = n.identifier || a("missing identifier"), this.methodName = n.methodName || a("missing method name") } return e.forToken = function (e) { return new this(e.element, e.index, n(e.content)) }, e.prototype.toString = function () { var e = this.eventTargetName ? "@" + this.eventTargetName : ""; return "" + this.eventName + e + "->" + this.identifier + "#" + this.methodName }, Object.defineProperty(e.prototype, "eventTargetName", { get: function () { return o(this.eventTarget) }, enumerable: !0, configurable: !0 }), e }(), _ = { a: function () { return "click" }, button: function () { return "click" }, form: function () { return "submit" }, input: function (e) { return "submit" == e.getAttribute("type") ? "click" : "change" }, select: function () { return "change" }, textarea: function () { return "change" } }, S = function () { function e(e, t) { this.context = e, this.action = t } return Object.defineProperty(e.prototype, "index", { get: function () { return this.action.index }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "eventTarget", { get: function () { return this.action.eventTarget }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "identifier", { get: function () { return this.context.identifier }, enumerable: !0, configurable: !0 }), e.prototype.handleEvent = function (e) { this.willBeInvokedByEvent(e) && this.invokeWithEvent(e) }, Object.defineProperty(e.prototype, "eventName", { get: function () { return this.action.eventName }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "method", { get: function () { var e = this.controller[this.methodName]; if ("function" == typeof e) return e; throw new Error('Action "' + this.action + '" references undefined method "' + this.methodName + '"') }, enumerable: !0, configurable: !0 }), e.prototype.invokeWithEvent = function (e) { try { this.method.call(this.controller, e) } catch (a) { var t = this, n = { identifier: t.identifier, controller: t.controller, element: t.element, index: t.index, event: e }; this.context.handleError(a, 'invoking action "' + this.action + '"', n) } }, e.prototype.willBeInvokedByEvent = function (e) { var t = e.target; return this.element === t || (!(t instanceof Element && this.element.contains(t)) || this.scope.containsElement(t)) }, Object.defineProperty(e.prototype, "controller", { get: function () { return this.context.controller }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "methodName", { get: function () { return this.action.methodName }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "element", { get: function () { return this.scope.element }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "scope", { get: function () { return this.context.scope }, enumerable: !0, configurable: !0 }), e }(), C = function () { function e(e, t) { var n = this; this.element = e, this.started = !1, this.delegate = t, this.elements = new Set, this.mutationObserver = new MutationObserver(function (e) { return n.processMutations(e) }) } return e.prototype.start = function () { this.started || (this.started = !0, this.mutationObserver.observe(this.element, { attributes: !0, childList: !0, subtree: !0 }), this.refresh()) }, e.prototype.stop = function () { this.started && (this.mutationObserver.takeRecords(), this.mutationObserver.disconnect(), this.started = !1) }, e.prototype.refresh = function () { if (this.started) { for (var e = new Set(this.matchElementsInTree()), t = 0, n = Array.from(this.elements); t < n.length; t++) { var r = n[t]; e.has(r) || this.removeElement(r) } for (var o = 0, i = Array.from(e); o < i.length; o++) { r = i[o]; this.addElement(r) } } }, e.prototype.processMutations = function (e) { if (this.started) for (var t = 0, n = e; t < n.length; t++) { var r = n[t]; this.processMutation(r) } }, e.prototype.processMutation = function (e) { "attributes" == e.type ? this.processAttributeChange(e.target, e.attributeName) : "childList" == e.type && (this.processRemovedNodes(e.removedNodes), this.processAddedNodes(e.addedNodes)) }, e.prototype.processAttributeChange = function (e, t) { var n = e; this.elements.has(n) ? this.delegate.elementAttributeChanged && this.matchElement(n) ? this.delegate.elementAttributeChanged(n, t) : this.removeElement(n) : this.matchElement(n) && this.addElement(n) }, e.prototype.processRemovedNodes = function (e) { for (var t = 0, n = Array.from(e); t < n.length; t++) { var r = n[t], o = this.elementFromNode(r); o && this.processTree(o, this.removeElement) } }, e.prototype.processAddedNodes = function (e) { for (var t = 0, n = Array.from(e); t < n.length; t++) { var r = n[t], o = this.elementFromNode(r); o && this.elementIsActive(o) && this.processTree(o, this.addElement) } }, e.prototype.matchElement = function (e) { return this.delegate.matchElement(e) }, e.prototype.matchElementsInTree = function (e) { return void 0 === e && (e = this.element), this.delegate.matchElementsInTree(e) }, e.prototype.processTree = function (e, t) { for (var n = 0, r = this.matchElementsInTree(e); n < r.length; n++) { var o = r[n]; t.call(this, o) } }, e.prototype.elementFromNode = function (e) { if (e.nodeType == Node.ELEMENT_NODE) return e }, e.prototype.elementIsActive = function (e) { return e.isConnected == this.element.isConnected && this.element.contains(e) }, e.prototype.addElement = function (e) { this.elements.has(e) || this.elementIsActive(e) && (this.elements.add(e), this.delegate.elementMatched && this.delegate.elementMatched(e)) }, e.prototype.removeElement = function (e) { this.elements.has(e) && (this.elements["delete"](e), this.delegate.elementUnmatched && this.delegate.elementUnmatched(e)) }, e }(), j = function () { function e(e, t, n) { this.attributeName = t, this.delegate = n, this.elementObserver = new C(e, this) } return Object.defineProperty(e.prototype, "element", { get: function () { return this.elementObserver.element }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "selector", { get: function () { return "[" + this.attributeName + "]" }, enumerable: !0, configurable: !0 }), e.prototype.start = function () { this.elementObserver.start() }, e.prototype.stop = function () { this.elementObserver.stop() }, e.prototype.refresh = function () { this.elementObserver.refresh() }, Object.defineProperty(e.prototype, "started", { get: function () { return this.elementObserver.started }, enumerable: !0, configurable: !0 }), e.prototype.matchElement = function (e) { return e.hasAttribute(this.attributeName) }, e.prototype.matchElementsInTree = function (e) { var t = this.matchElement(e) ? [e] : [], n = Array.from(e.querySelectorAll(this.selector)); return t.concat(n) }, e.prototype.elementMatched = function (e) { this.delegate.elementMatchedAttribute && this.delegate.elementMatchedAttribute(e, this.attributeName) }, e.prototype.elementUnmatched = function (e) { this.delegate.elementUnmatchedAttribute && this.delegate.elementUnmatchedAttribute(e, this.attributeName) }, e.prototype.elementAttributeChanged = function (e, t) { this.delegate.elementAttributeValueChanged && this.attributeName == t && this.delegate.elementAttributeValueChanged(e, t) }, e }(), F = function () { function e() { this.valuesByKey = new Map } return Object.defineProperty(e.prototype, "values", { get: function () { return Array.from(this.valuesByKey.values()).reduce(function (e, t) { return e.concat(Array.from(t)) }, []) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "size", { get: function () { return Array.from(this.valuesByKey.values()).reduce(function (e, t) { return e + t.size }, 0) }, enumerable: !0, configurable: !0 }), e.prototype.add = function (e, t) { s(this.valuesByKey, e, t) }, e.prototype["delete"] = function (e, t) { c(this.valuesByKey, e, t) }, e.prototype.has = function (e, t) { var n = this.valuesByKey.get(e); return null != n && n.has(t) }, e.prototype.hasKey = function (e) { return this.valuesByKey.has(e) }, e.prototype.hasValue = function (e) { return Array.from(this.valuesByKey.values()).some(function (t) { return t.has(e) }) }, e.prototype.getValuesForKey = function (e) { var t = this.valuesByKey.get(e); return t ? Array.from(t) : [] }, e.prototype.getKeysForValue = function (e) { return Array.from(this.valuesByKey).filter(function (t) { t[0]; return t[1].has(e) }).map(function (e) { var t = e[0]; e[1]; return t }) }, e }(), N = undefined && undefined.__extends || (x = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) }, function (e, t) { function n() { this.constructor = e } x(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) }), M = (function (e) { function t() { var t = e.call(this) || this; return t.keysByValue = new Map, t } N(t, e), Object.defineProperty(t.prototype, "values", { get: function () { return Array.from(this.keysByValue.keys()) }, enumerable: !0, configurable: !0 }), t.prototype.add = function (t, n) { e.prototype.add.call(this, t, n), s(this.keysByValue, n, t) }, t.prototype["delete"] = function (t, n) { e.prototype["delete"].call(this, t, n), c(this.keysByValue, n, t) }, t.prototype.hasValue = function (e) { return this.keysByValue.has(e) }, t.prototype.getKeysForValue = function (e) { var t = this.keysByValue.get(e); return t ? Array.from(t) : [] } }(F), function () { function e(e, t, n) { this.attributeObserver = new j(e, t, this), this.delegate = n, this.tokensByElement = new F } return Object.defineProperty(e.prototype, "started", { get: function () { return this.attributeObserver.started }, enumerable: !0, configurable: !0 }), e.prototype.start = function () { this.attributeObserver.start() }, e.prototype.stop = function () { this.attributeObserver.stop() }, e.prototype.refresh = function () { this.attributeObserver.refresh() }, Object.defineProperty(e.prototype, "element", { get: function () { return this.attributeObserver.element }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "attributeName", { get: function () { return this.attributeObserver.attributeName }, enumerable: !0, configurable: !0 }), e.prototype.elementMatchedAttribute = function (e) { this.tokensMatched(this.readTokensForElement(e)) }, e.prototype.elementAttributeValueChanged = function (e) { var t = this.refreshTokensForElement(e), n = t[0], r = t[1]; this.tokensUnmatched(n), this.tokensMatched(r) }, e.prototype.elementUnmatchedAttribute = function (e) { this.tokensUnmatched(this.tokensByElement.getValuesForKey(e)) }, e.prototype.tokensMatched = function (e) { var t = this; e.forEach(function (e) { return t.tokenMatched(e) }) }, e.prototype.tokensUnmatched = function (e) { var t = this; e.forEach(function (e) { return t.tokenUnmatched(e) }) }, e.prototype.tokenMatched = function (e) { this.delegate.tokenMatched(e), this.tokensByElement.add(e.element, e) }, e.prototype.tokenUnmatched = function (e) { this.delegate.tokenUnmatched(e), this.tokensByElement["delete"](e.element, e) }, e.prototype.refreshTokensForElement = function (e) { var t = this.tokensByElement.getValuesForKey(e), n = this.readTokensForElement(e), r = p(t, n).findIndex(function (e) { return !d(e[0], e[1]) }); return -1 == r ? [[], []] : [t.slice(r), n.slice(r)] }, e.prototype.readTokensForElement = function (e) { var t = this.attributeName; return f(e.getAttribute(t) || "", e, t) }, e }()), I = function () { function e(e, t, n) { this.tokenListObserver = new M(e, t, this), this.delegate = n, this.parseResultsByToken = new WeakMap, this.valuesByTokenByElement = new WeakMap } return Object.defineProperty(e.prototype, "started", { get: function () { return this.tokenListObserver.started }, enumerable: !0, configurable: !0 }), e.prototype.start = function () { this.tokenListObserver.start() }, e.prototype.stop = function () { this.tokenListObserver.stop() }, e.prototype.refresh = function () { this.tokenListObserver.refresh() }, Object.defineProperty(e.prototype, "element", { get: function () { return this.tokenListObserver.element }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "attributeName", { get: function () { return this.tokenListObserver.attributeName }, enumerable: !0, configurable: !0 }), e.prototype.tokenMatched = function (e) { var t = e.element, n = this.fetchParseResultForToken(e).value; n && (this.fetchValuesByTokenForElement(t).set(e, n), this.delegate.elementMatchedValue(t, n)) }, e.prototype.tokenUnmatched = function (e) { var t = e.element, n = this.fetchParseResultForToken(e).value; n && (this.fetchValuesByTokenForElement(t)["delete"](e), this.delegate.elementUnmatchedValue(t, n)) }, e.prototype.fetchParseResultForToken = function (e) { var t = this.parseResultsByToken.get(e); return t || (t = this.parseToken(e), this.parseResultsByToken.set(e, t)), t }, e.prototype.fetchValuesByTokenForElement = function (e) { var t = this.valuesByTokenByElement.get(e); return t || (t = new Map, this.valuesByTokenByElement.set(e, t)), t }, e.prototype.parseToken = function (e) { try { return { value: this.delegate.parseValueForToken(e) } } catch (a) { return { error: a } } }, e }(), R = function () { function e(e, t) { this.context = e, this.delegate = t, this.bindingsByAction = new Map } return e.prototype.start = function () { this.valueListObserver || (this.valueListObserver = new I(this.element, this.actionAttribute, this), this.valueListObserver.start()) }, e.prototype.stop = function () { this.valueListObserver && (this.valueListObserver.stop(), delete this.valueListObserver, this.disconnectAllActions()) }, Object.defineProperty(e.prototype, "element", { get: function () { return this.context.element }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "identifier", { get: function () { return this.context.identifier }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "actionAttribute", { get: function () { return this.schema.actionAttribute }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "schema", { get: function () { return this.context.schema }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bindings", { get: function () { return Array.from(this.bindingsByAction.values()) }, enumerable: !0, configurable: !0 }), e.prototype.connectAction = function (e) { var t = new S(this.context, e); this.bindingsByAction.set(e, t), this.delegate.bindingConnected(t) }, e.prototype.disconnectAction = function (e) { var t = this.bindingsByAction.get(e); t && (this.bindingsByAction["delete"](e), this.delegate.bindingDisconnected(t)) }, e.prototype.disconnectAllActions = function () { var e = this; this.bindings.forEach(function (t) { return e.delegate.bindingDisconnected(t) }), this.bindingsByAction.clear() }, e.prototype.parseValueForToken = function (e) { var t = L.forToken(e); if (t.identifier == this.identifier) return t }, e.prototype.elementMatchedValue = function (e, t) { this.connectAction(t) }, e.prototype.elementUnmatchedValue = function (e, t) { this.disconnectAction(t) }, e }(), D = function () { function e(e, t) { this.module = e, this.scope = t, this.controller = new e.controllerConstructor(this), this.bindingObserver = new R(this, this.dispatcher); try { this.controller.initialize() } catch (a) { this.handleError(a, "initializing controller") } } return e.prototype.connect = function () { this.bindingObserver.start(); try { this.controller.connect() } catch (a) { this.handleError(a, "connecting controller") } }, e.prototype.disconnect = function () { try { this.controller.disconnect() } catch (a) { this.handleError(a, "disconnecting controller") } this.bindingObserver.stop() }, Object.defineProperty(e.prototype, "application", { get: function () { return this.module.application }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "identifier", { get: function () { return this.module.identifier }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "schema", { get: function () { return this.application.schema }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "dispatcher", { get: function () { return this.application.dispatcher }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "element", { get: function () { return this.scope.element }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "parentElement", { get: function () { return this.element.parentElement }, enumerable: !0, configurable: !0 }), e.prototype.handleError = function (e, t, n) { void 0 === n && (n = {}); var r = this, o = r.identifier, i = r.controller, a = r.element; n = Object.assign({ identifier: o, controller: i, element: a }, n), this.application.handleError(e, "Error " + t, n) }, e }(), q = undefined && undefined.__extends || function () { var e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) }; return function (t, n) { function r() { this.constructor = t } e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r) } }(), U = function () { function e(e) { function t() { var n = this && this instanceof t ? this.constructor : void 0; return Reflect.construct(e, arguments, n) } return t.prototype = Object.create(e.prototype, { constructor: { value: t } }), Reflect.setPrototypeOf(t, e), t } function t() { var t = e(function () { this.a.call(this) }); return t.prototype.a = function () { }, new t } try { return t(), e } catch (a) { return function (e) { return function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return q(t, e), t }(e) } } }(), H = function () { function e(e, t) { this.application = e, this.definition = h(t), this.contextsByScope = new WeakMap, this.connectedContexts = new Set } return Object.defineProperty(e.prototype, "identifier", { get: function () { return this.definition.identifier }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "controllerConstructor", { get: function () { return this.definition.controllerConstructor }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "contexts", { get: function () { return Array.from(this.connectedContexts) }, enumerable: !0, configurable: !0 }), e.prototype.connectContextForScope = function (e) { var t = this.fetchContextForScope(e); this.connectedContexts.add(t), t.connect() }, e.prototype.disconnectContextForScope = function (e) { var t = this.contextsByScope.get(e); t && (this.connectedContexts["delete"](t), t.disconnect()) }, e.prototype.fetchContextForScope = function (e) { var t = this.contextsByScope.get(e); return t || (t = new D(this, e), this.contextsByScope.set(e, t)), t }, e }(), V = function () { function e(e) { this.scope = e } return Object.defineProperty(e.prototype, "element", { get: function () { return this.scope.element }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "identifier", { get: function () { return this.scope.identifier }, enumerable: !0, configurable: !0 }), e.prototype.get = function (e) { return e = this.getFormattedKey(e), this.element.getAttribute(e) }, e.prototype.set = function (e, t) { return e = this.getFormattedKey(e), this.element.setAttribute(e, t), this.get(e) }, e.prototype.has = function (e) { return e = this.getFormattedKey(e), this.element.hasAttribute(e) }, e.prototype["delete"] = function (e) { return !!this.has(e) && (e = this.getFormattedKey(e), this.element.removeAttribute(e), !0) }, e.prototype.getFormattedKey = function (e) { return "data-" + this.identifier + "-" + g(e) }, e }(), W = function () { function e(e) { this.scope = e } return Object.defineProperty(e.prototype, "element", { get: function () { return this.scope.element }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "identifier", { get: function () { return this.scope.identifier }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "schema", { get: function () { return this.scope.schema }, enumerable: !0, configurable: !0 }), e.prototype.has = function (e) { return null != this.find(e) }, e.prototype.find = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var n = this.getSelectorForTargetNames(e); return this.scope.findElement(n) }, e.prototype.findAll = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var n = this.getSelectorForTargetNames(e); return this.scope.findAllElements(n) }, e.prototype.getSelectorForTargetNames = function (e) { var t = this; return e.map(function (e) { return t.getSelectorForTargetName(e) }).join(", ") }, e.prototype.getSelectorForTargetName = function (e) { var t = this.identifier + "." + e; return b(this.schema.targetAttribute, t) }, e }(), K = function () { function e(e, t, n) { this.schema = e, this.identifier = t, this.element = n, this.targets = new W(this), this.data = new V(this) } return e.prototype.findElement = function (e) { return this.findAllElements(e)[0] }, e.prototype.findAllElements = function (e) { var t = this.element.matches(e) ? [this.element] : [], n = this.filterElements(Array.from(this.element.querySelectorAll(e))); return t.concat(n) }, e.prototype.filterElements = function (e) { var t = this; return e.filter(function (e) { return t.containsElement(e) }) }, e.prototype.containsElement = function (e) { return e.closest(this.controllerSelector) === this.element }, Object.defineProperty(e.prototype, "controllerSelector", { get: function () { return b(this.schema.controllerAttribute, this.identifier) }, enumerable: !0, configurable: !0 }), e }(), z = function () { function e(e, t, n) { this.element = e, this.schema = t, this.delegate = n, this.valueListObserver = new I(this.element, this.controllerAttribute, this), this.scopesByIdentifierByElement = new WeakMap, this.scopeReferenceCounts = new WeakMap } return e.prototype.start = function () { this.valueListObserver.start() }, e.prototype.stop = function () { this.valueListObserver.stop() }, Object.defineProperty(e.prototype, "controllerAttribute", { get: function () { return this.schema.controllerAttribute }, enumerable: !0, configurable: !0 }), e.prototype.parseValueForToken = function (e) { var t = e.element, n = e.content, r = this.fetchScopesByIdentifierForElement(t), o = r.get(n); return o || (o = new K(this.schema, n, t), r.set(n, o)), o }, e.prototype.elementMatchedValue = function (e, t) { var n = (this.scopeReferenceCounts.get(t) || 0) + 1; this.scopeReferenceCounts.set(t, n), 1 == n && this.delegate.scopeConnected(t) }, e.prototype.elementUnmatchedValue = function (e, t) { var n = this.scopeReferenceCounts.get(t); n && (this.scopeReferenceCounts.set(t, n - 1), 1 == n && this.delegate.scopeDisconnected(t)) }, e.prototype.fetchScopesByIdentifierForElement = function (e) { var t = this.scopesByIdentifierByElement.get(e); return t || (t = new Map, this.scopesByIdentifierByElement.set(e, t)), t }, e }(), X = function () { function e(e) { this.application = e, this.scopeObserver = new z(this.element, this.schema, this), this.scopesByIdentifier = new F, this.modulesByIdentifier = new Map } return Object.defineProperty(e.prototype, "element", { get: function () { return this.application.element }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "schema", { get: function () { return this.application.schema }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "controllerAttribute", { get: function () { return this.schema.controllerAttribute }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "modules", { get: function () { return Array.from(this.modulesByIdentifier.values()) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "contexts", { get: function () { return this.modules.reduce(function (e, t) { return e.concat(t.contexts) }, []) }, enumerable: !0, configurable: !0 }), e.prototype.start = function () { this.scopeObserver.start() }, e.prototype.stop = function () { this.scopeObserver.stop() }, e.prototype.loadDefinition = function (e) { this.unloadIdentifier(e.identifier); var t = new H(this.application, e); this.connectModule(t) }, e.prototype.unloadIdentifier = function (e) { var t = this.modulesByIdentifier.get(e); t && this.disconnectModule(t) }, e.prototype.getContextForElementAndIdentifier = function (e, t) { var n = this.modulesByIdentifier.get(t); if (n) return n.contexts.find(function (t) { return t.element == e }) }, e.prototype.handleError = function (e, t, n) { this.application.handleError(e, t, n) }, e.prototype.scopeConnected = function (e) { this.scopesByIdentifier.add(e.identifier, e); var t = this.modulesByIdentifier.get(e.identifier); t && t.connectContextForScope(e) }, e.prototype.scopeDisconnected = function (e) { this.scopesByIdentifier["delete"](e.identifier, e); var t = this.modulesByIdentifier.get(e.identifier); t && t.disconnectContextForScope(e) }, e.prototype.connectModule = function (e) { this.modulesByIdentifier.set(e.identifier, e), this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(function (t) { return e.connectContextForScope(t) }) }, e.prototype.disconnectModule = function (e) { this.modulesByIdentifier["delete"](e.identifier), this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(function (t) { return e.disconnectContextForScope(t) }) }, e }(), Y = { controllerAttribute: "data-controller", actionAttribute: "data-action", targetAttribute: "data-target" }, $ = undefined && undefined.__awaiter || function (e, t, n, r) { return new (n || (n = Promise))(function (o, i) { function a(e) { try { c(r.next(e)) } catch (t) { i(t) } } function s(e) { try { c(r["throw"](e)) } catch (t) { i(t) } } function c(e) { e.done ? o(e.value) : new n(function (t) { t(e.value) }).then(a, s) } c((r = r.apply(e, t || [])).next()) }) }, G = undefined && undefined.__generator || function (e, t) { function n(e) { return function (t) { return r([e, t]) } } function r(n) { if (o) throw new TypeError("Generator is already executing."); for (; c;)try { if (o = 1, i && (a = i[2 & n[0] ? "return" : n[0] ? "throw" : "next"]) && !(a = a.call(i, n[1])).done) return a; switch (i = 0, a && (n = [0, a.value]), n[0]) { case 0: case 1: a = n; break; case 4: return c.label++, { value: n[1], done: !1 }; case 5: c.label++, i = n[1], n = [0]; continue; case 7: n = c.ops.pop(), c.trys.pop(); continue; default: if (!(a = (a = c.trys).length > 0 && a[a.length - 1]) && (6 === n[0] || 2 === n[0])) { c = 0; continue } if (3 === n[0] && (!a || n[1] > a[0] && n[1] < a[3])) { c.label = n[1]; break } if (6 === n[0] && c.label < a[1]) { c.label = a[1], a = n; break } if (a && c.label < a[2]) { c.label = a[2], c.ops.push(n); break } a[2] && c.ops.pop(), c.trys.pop(); continue }n = t.call(e, c) } catch (r) { n = [6, r], i = 0 } finally { o = a = 0 } if (5 & n[0]) throw n[1]; return { value: n[0] ? n[1] : void 0, done: !0 } } var o, i, a, s, c = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return s = { next: n(0), "throw": n(1), "return": n(2) }, "function" == typeof Symbol && (s[Symbol.iterator] = function () { return this }), s }, J = function () { function e(e, t) { void 0 === e && (e = document.documentElement), void 0 === t && (t = Y), this.element = e, this.schema = t, this.dispatcher = new A(this), this.router = new X(this) } return e.start = function (t, n) { var r = new e(t, n); return r.start(), r }, e.prototype.start = function () { return $(this, void 0, void 0, function () { return G(this, function (e) { switch (e.label) { case 0: return [4, y()]; case 1: return e.sent(), this.router.start(), this.dispatcher.start(), [2] } }) }) }, e.prototype.stop = function () { this.router.stop(), this.dispatcher.stop() }, e.prototype.register = function (e, t) { this.load({ identifier: e, controllerConstructor: t }) }, e.prototype.load = function (e) { for (var t = this, n = [], r = 1; r < arguments.length; r++)n[r - 1] = arguments[r]; (Array.isArray(e) ? e : [e].concat(n)).forEach(function (e) { return t.router.loadDefinition(e) }) }, e.prototype.unload = function (e) { for (var t = this, n = [], r = 1; r < arguments.length; r++)n[r - 1] = arguments[r]; (Array.isArray(e) ? e : [e].concat(n)).forEach(function (e) { return t.router.unloadIdentifier(e) }) }, Object.defineProperty(e.prototype, "controllers", { get: function () { return this.router.contexts.map(function (e) { return e.controller }) }, enumerable: !0, configurable: !0 }), e.prototype.getControllerForElementAndIdentifier = function (e, t) { var n = this.router.getContextForElementAndIdentifier(e, t); return n ? n.controller : null }, e.prototype.handleError = function (e, t, n) { console.error("%s\n\n%o\n\n%o", t, e, n) }, e }(), Z = function () { function e(e) { this.context = e } return e.bless = function () { v(this) }, Object.defineProperty(e.prototype, "application", { get: function () { return this.context.application }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "scope", { get: function () { return this.context.scope }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "element", { get: function () { return this.scope.element }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "identifier", { get: function () { return this.scope.identifier }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "targets", { get: function () { return this.scope.targets }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "data", { get: function () { return this.scope.data }, enumerable: !0, configurable: !0 }), e.prototype.initialize = function () { }, e.prototype.connect = function () { }, e.prototype.disconnect = function () { }, e.targets = [], e }(); e.Application = J, e.Context = D, e.Controller = Z, e.defaultSchema = Y, Object.defineProperty(e, "__esModule", { value: !0 })
}), window.application = Stimulus.Application.start(), application.register("anchors", class extends Stimulus.Controller { static get targets() { return ["iconTemplate"] } initialize() { for (let e = 1; e <= 6; e++)this.linkifyAnchors(e, this.element) } linkifyAnchors(e, t) { t.querySelectorAll("h" + e).forEach(e => { "undefined" != typeof e.id && "" !== e.id && e.appendChild(this.anchorForId(e.id, e.innerHTML)) }) } anchorForId(e, t) { const n = `\n     <a class="anchor-link" href="${"#" + e}" aria-label="${t}">\n       ${this.iconTemplateTarget.innerHTML}\n     </a>\n    `; return (new DOMParser).parseFromString(n, "text/html").body.firstChild } }), application.register("bookmark", class extends Stimulus.Controller { static get targets() { return ["button"] } initialize() { this.observer = new IntersectionObserver(this.onIntersection.bind(this)) } connect() { const e = this.data.get("id"); this.hasButtonTarget ? localStorage.getItem(e) && (this.buttonTarget.innerHTML = "Continue from where you left off &rarr;", this.buttonTarget.href = localStorage.getItem(e)) : (localStorage.setItem(e, window.location.pathname), this.element.querySelectorAll("h2").forEach(e => { this.observer.observe(e) })) } onIntersection(e) { const t = this.data.get("id"); e.forEach(e => { if (e.isIntersecting) { let n = window.location.pathname + "#" + e.target.id; localStorage.setItem(t, n) } }) } }), application.register("glossary", class extends Stimulus.Controller {
    static get targets() { return ["source"] } initialize() {
        this.element.querySelectorAll("code").forEach(e => {
            e.addEventListener("mouseover", () => {
                const t = this.findDefinition(e.textContent); if (t) {
                    const n = this.createDefinitionPop(e, t); e.addEventListener("mouseout", () => { n.classList.remove("pop--visible"), setTimeout(() => { n.remove() }, 100) }, { once: !0 })
                }
            })
        })
    } findDefinition(e) { const t = new RegExp(e, "i"), n = this.getDefinitions(); for (const e in n) if (t.test(e)) return n[e] } getDefinitions() { return this.definitions || (this.definitions = {}, this.sourceTarget.querySelectorAll("dt").forEach(e => { const t = e.textContent, n = e.nextElementSibling.textContent; this.definitions[t] = n })), this.definitions } createDefinitionPop(e, t) { const n = `\n     <div class="pop">\n       ${t}\n       <div class="pop__arrow"></div>\n     </div>\n    `, r = (new DOMParser).parseFromString(n, "text/html"), o = this.element.appendChild(r.body.firstChild); new Popper(e, o, { onCreate: function () { o.classList.add("pop--visible") } }); return o }
}), application.register("sidebar", class extends Stimulus.Controller { static get targets() { return ["menu", "content"] } open() { this.menuTarget.classList.add("menu--show"), this.element.classList.add("modal-open"), this.contentTarget.querySelectorAll("a").forEach(e => { e.tabIndex = "-1" }) } close() { this.menuTarget.classList.contains("menu--show") && (this.menuTarget.classList.remove("menu--show"), this.element.classList.remove("modal-open"), this.contentTarget.querySelectorAll("a").forEach(e => { e.removeAttribute("tabIndex") })) } closeWithKey(e) { 27 === e.keyCode && this.close() } }), application.register("track", class extends Stimulus.Controller { trackLink() { Beanstalk.logEvent("clickedLink", event.currentTarget.href) } }), application.register("tweet", class extends Stimulus.Controller { static get targets() { return ["iconTemplate"] } initialize() { this.createTweetPop(), this.updateRect(), this.tweetPopper = new Popper(this, this.tweetPop, { placement: "top", modifiers: { offset: { offset: "0,5" } } }) } updateRect(e) { !e && this.range ? this.rect = this.range.getBoundingClientRect() : this.rect = { top: 0, left: 0, right: 0, bottom: 0, width: 0, height: 0 }, this.rectChangedCallback(this.rect) } update(e, t) { const n = document.getSelection(); this.range = n && n.rangeCount && n.getRangeAt(0), this.updateRect(t) } rectChangedCallback({ width: e }) { e > .1 ? (this.tweetPop.href = "https://twitter.com/intent/tweet?text=" + encodeURIComponent(document.getSelection().toString() + " " + window.location.href), this.tweetPopper.scheduleUpdate(), this.tweetPop.classList.add("pop--visible")) : this.tweetPop.classList.remove("pop--visible") } getBoundingClientRect() { return this.rect } createTweetPop() { const e = `\n     <a class="pop">\n       ${this.iconTemplateTarget.innerHTML}\n       <div class="pop__arrow"></div>\n     </a>\n    `, t = (new DOMParser).parseFromString(e, "text/html"); this.tweetPop = document.querySelector("body").appendChild(t.body.firstChild) } }), Beanstalk.site_id = 78, Beanstalk.beacon.autosend = !1;
